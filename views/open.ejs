<!DOCTYPE html>
<html lang="ko">
    <%- include('include/head', { title: 'What Was Today' })%>
    <body>
        <%- include('include/header')%>
        <H1 class="H1WWT">Today's Weather</H1>
        <div class="carousel-frame">
            <div class="carousel-contents">
                <div class="weather carousel-item">
                    <p id="weatherLogo">
                        <img
                            class="weatherLogoImg"
                            src="../static/image/sunny.png"
                            alt="날씨로고"
                        />
                    </p>
                    <!-- 날씨 api 받아서 로고 표시 -->
                    <div id="weatherInfo">
                        <p id="weatherRegion">서울</p>
                        <p id="weatherTemp">7<span>℃</span></p>
                    </div>
                    <!-- 날씨 api 받아서 온도 및 지역 표시 -->
                    <a href="/main">오늘의 코스를 보시겠습니까?</a>
                </div>
                <div class="weather carousel-item">
                    <p id="weatherLogo">
                        <img
                            class="weatherLogoImg"
                            src="../static/image/rainny.png"
                            alt="날씨로고"
                        />
                    </p>
                    <!-- 날씨 api 받아서 로고 표시 -->
                    <div id="weatherInfo">
                        <p id="weatherRegion">경기</p>
                        <p id="weatherTemp">5<span>℃</span></p>
                    </div>
                    <!-- 날씨 api 받아서 온도 및 지역 표시 -->
                    <a href="/main">오늘의 코스를 보시겠습니까?</a>
                </div>
                <div class="weather carousel-item">
                    <p id="weatherLogo">
                        <img
                            class="weatherLogoImg"
                            src="../static/image/snowy.png"
                            alt="날씨로고"
                        />
                    </p>
                    <!-- 날씨 api 받아서 로고 표시 -->
                    <div id="weatherInfo">
                        <p id="weatherRegion">강원</p>
                        <p id="weatherTemp">7<span>℃</span></p>
                    </div>
                    <!-- 날씨 api 받아서 온도 및 지역 표시 -->
                    <a href="/main">오늘의 코스를 보시겠습니까?</a>
                </div>
                <div class="weather carousel-item">
                    <p id="weatherLogo">
                        <img
                            class="weatherLogoImg"
                            src="../static/image/cloud.png"
                            alt="날씨로고"
                        />
                    </p>
                    <!-- 날씨 api 받아서 로고 표시 -->
                    <div id="weatherInfo">
                        <p id="weatherRegion">충북</p>
                        <p id="weatherTemp">7<span>℃</span></p>
                    </div>
                    <!-- 날씨 api 받아서 온도 및 지역 표시 -->
                    <a href="/main">오늘의 코스를 보시겠습니까?</a>
                </div>
                <div class="weather carousel-item">
                    <p id="weatherLogo">
                        <img
                            class="weatherLogoImg"
                            src="../static/image/sunny.png"
                            alt="날씨로고"
                        />
                    </p>
                    <!-- 날씨 api 받아서 로고 표시 -->
                    <div id="weatherInfo">
                        <p id="weatherRegion">충남</p>
                        <p id="weatherTemp">7<span>℃</span></p>
                    </div>
                    <!-- 날씨 api 받아서 온도 및 지역 표시 -->
                    <a href="/main">오늘의 코스를 보시겠습니까?</a>
                </div>
                <div class="weather carousel-item">
                    <p id="weatherLogo">
                        <img
                            class="weatherLogoImg"
                            src="../static/image/rainny.png"
                            alt="날씨로고"
                        />
                    </p>
                    <!-- 날씨 api 받아서 로고 표시 -->
                    <div id="weatherInfo">
                        <p id="weatherRegion">전북</p>
                        <p id="weatherTemp">7<span>℃</span></p>
                    </div>
                    <!-- 날씨 api 받아서 온도 및 지역 표시 -->
                    <a href="/main">오늘의 코스를 보시겠습니까?</a>
                </div>
                <div class="weather carousel-item">
                    <p id="weatherLogo">
                        <img
                            class="weatherLogoImg"
                            src="../static/image/sunny.png"
                            alt="날씨로고"
                        />
                    </p>
                    <!-- 날씨 api 받아서 로고 표시 -->
                    <div id="weatherInfo">
                        <p id="weatherRegion">전남</p>
                        <p id="weatherTemp">7<span>℃</span></p>
                    </div>
                    <!-- 날씨 api 받아서 온도 및 지역 표시 -->
                    <a href="/main">오늘의 코스를 보시겠습니까?</a>
                </div>
                <div class="weather carousel-item">
                    <p id="weatherLogo">
                        <img
                            class="weatherLogoImg"
                            src="../static/image/cloud.png"
                            alt="날씨로고"
                        />
                    </p>
                    <!-- 날씨 api 받아서 로고 표시 -->
                    <div id="weatherInfo">
                        <p id="weatherRegion">경북</p>
                        <p id="weatherTemp">7<span>℃</span></p>
                    </div>
                    <!-- 날씨 api 받아서 온도 및 지역 표시 -->
                    <a href="/main">오늘의 코스를 보시겠습니까?</a>
                </div>
                <div class="weather carousel-item">
                    <p id="weatherLogo">
                        <img
                            class="weatherLogoImg"
                            src="../static/image/snowy.png"
                            alt="날씨로고"
                        />
                    </p>
                    <!-- 날씨 api 받아서 로고 표시 -->
                    <div id="weatherInfo">
                        <p id="weatherRegion">경남</p>
                        <p id="weatherTemp">7<span>℃</span></p>
                    </div>
                    <!-- 날씨 api 받아서 온도 및 지역 표시 -->
                    <a href="/main">오늘의 코스를 보시겠습니까?</a>
                </div>
                <div class="weather carousel-item">
                    <p id="weatherLogo">
                        <img
                            class="weatherLogoImg"
                            src="../static/image/sunny.png"
                            alt="날씨로고"
                        />
                    </p>
                    <!-- 날씨 api 받아서 로고 표시 -->
                    <div id="weatherInfo">
                        <p id="weatherRegion">제주도</p>
                        <p id="weatherTemp">7<span>℃</span></p>
                    </div>
                    <!-- 날씨 api 받아서 온도 및 지역 표시 -->
                    <a href="/main">오늘의 코스를 보시겠습니까?</a>
                </div>
            </div>
            <button onclick="leftHandler()" class="left"><</button>
            <button onclick="rightHandler()" class="right">></button>
        </div>
        <div class="line">
            <div class="target"></div>
        </div>
        <script>
            // JS code 해석이 더 빨라도 가장 나중에 실행되게끔 맨 마지막에 써준다.
            // 그걸 확실히 방지하고 싶으면 onload() 라는 함수를 쓴다
            window.onload = () => {
                const line = document.querySelector(".line");
                const items = document.querySelectorAll(".carousel-item");
                const target = document.querySelector(".target");
                target.style.width = `${line.offsetWidth / items.length}px`;
            };

            let count = 0; // 처음에 초기값을 0으로 잡아준다. 꼭 함수 밖에다 선언!!

            const leftHandler = () => {
                // 지금 내가보고 있는 그림이 몇번째인지,
                //                  count
                // 1번 0            0
                // 2번 -1000        1
                // 3번 -2000        2
                // 4번 -3000        3
                // 5번 -4000        4
                const line = document.querySelector(".line");
                const frame = document.querySelector(".carousel-frame");
                const items = document.querySelectorAll(".carousel-item");
                if (count <= 0) {
                    count = items.length;
                }
                count = count - 1;
                const carContents = document.querySelector(".carousel-contents");
                carContents.style.transform = `translateX(-${count * frame.offsetWidth}px)`;
                carContents.style.transform = `translateX(-${count * frame.offsetWidth}px)`;
                const target = document.querySelector(".target");
                target.style.transform = `translateX(${
                    count * (line.offsetWidth / items.length)
                }px)`;
            };

            const rightHandler = () => {
                // 전체길이 / div갯수 = 하면 컴퓨터가 알아서 계산 해줄텐데...
                // 코드를 그때 그때 잘 적용시키기 위해서 요소로 적어둔다
                const line = document.querySelector(".line");
                const frame = document.querySelector(".carousel-frame");
                // console.log(line);
                // 회색 선 전체의 길이: line.offsetWidth
                // 한칸의 길이 : 회색선전체길이 / 갯수

                const items = document.querySelectorAll(".carousel-item");
                // items에는 무엇이 들어있다? :배열
                // 배열의 요소의 갯수는? length 키값에 들어있다
                if (count >= items.length - 1) {
                    count = -1;
                    // return; 함수 종료 시키려면
                }
                count = count + 1; // 여기가 어려움(누를때마다 숫자가 올라가야하니까)
                const carContents = document.querySelector(".carousel-contents");
                carContents.style.transform = `translateX(-${count * frame.offsetWidth}px)`;
                const target = document.querySelector(".target");
                // 막대기 이동시키기
                // 원리: css를 어떻게 바꿔줄 것이냐
                target.style.transform = `translateX(${
                    count * (line.offsetWidth / items.length)
                }px)`;
                // target.style.width = `(${(count+1)*200}px)`; 막대기 늘리기
            };
        </script>
    </body>
</html>
